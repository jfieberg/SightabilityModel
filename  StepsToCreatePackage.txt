
Steps to create/submit package

------------------------------------------------------------------------------
(a) Creating Vignettes.

(a.1) Naming vignettes
*** Note that ALL vignette files must begin with a letter. So you should not
number your vignettes as 01-,  02- etc.
See 
   https://github.com/r-lib/pkgdown/issues/545
   https://stat.ethz.ch/pipermail/r-package-devel/2015q2/000143.html

(a.2) Static Vignettes
If vignettes take too long to run for CRAN, you can use static HTML vignettes.
See https://stackoverflow.com/questions/52340398/how-to-include-static-vignettes-in-r-package-using-r-rsp

Include all of the *.Rmd files in the vignettes directory as usual.

(a.2.1) Static HTML vignettes

Modify the vignette header as noted below:

title: "Bias caused by incomplete sampling"
author: "Carl James Schwarz"
date: "`r Sys.Date()`"
output: 
  html_vignette: 
    toc: true # table of content true
    toc_depth: 3  # upto three depths of headings (specified by #, ## and ###)
    number_sections: true  ## if you want number sections at each table header
#vignette: >
#  %\VignetteIndexEntry{05 - Bias caused by incomplete sampling}
#  %\VignetteEncoding{UTF-8}
#  %\VignetteEngine{knitr::rmarkdown_notangle}

Notice that for as.is html documents, you comment out the last 4 lines .
The html_vignetter output type generates small html files.

(a.2.2) Generate the html document.
- you must create the html vignettes outside of the vignettes directory or use markdown::render() to do them in place
  see https://stackoverflow.com/questions/23683994/knit-html-does-not-save-html-in-vignettes


(a.2.3) Add the *.asis file
- create a file in the vignettes directory of the form  my vignette.html.asis
- notice that there are two suffixes to the file.

- this file contains code similar to:
%\VignetteIndexEntry{01 Diagonal model}
%\VignetteEngine{R.rsp::asis}
%\VignetteKeyword{vignette}
%\VignetteKeyword{package}

- note the Vignette engine

- at this point you should have the myvignette.Rmd, myvignette.html, and myvignette.html.asis
in the vignette directory.

(a.2.4) Modify the Description file to include
Suggests: R.rsp
VignetteBuilder: R.rsp

(a.2.5) Fix the vignette index if needed
The index.html file in the vignettes directory will be used instead of the autogenerated index.html file.
The latter does not sort properly (sorts by engine then file name). So I copied over an index.html file
from an earlier build, sorted properly, and added the d-...source.R file (see the end of the corresponding Rmd file 
where I purl()'d the file) to the index entry.

You may need to modify the vignettes/.install_extras file to list any files that should be added to inst/doc
and referenced by the modified index file.

------------------------------------------------------------------------------
(b) Submitting to CRAN

(b.0) Update
- Update DESCRIPTION with new version number
- Update NEWS.md with description of changes to new versin
- Update cran-comments.md as needed

(b.1) Spelling check
- Use 
    devtools::spell_check() 
 and fix spelling errors

(b.2) Build documentation
- Use
    Rstudio -> Build -> Documentation 
  to run Roxygen and build files for manuals etc.

(b.3) Local check on package (this is not a complete CRAN check)
   RStudio -> Build -> Check Package

(b.4) Build a local version of the package
     RStudio -> Build -> BuildSourcePackage.
  This will generate a *tar.gz file. 
  Install from the *tar.gz file and check that everything works.  

(b.5) Commit the changes to GitHub

(b.6) Various checks on the package
  devtools::check_rhub(env_vars=c(R_COMPILE_AND_INSTALL_PACKAGES = "always"))
  devtools::check_win_release()
  devtools::check_win_devel()
  
  After each run, you will get an email message with a link to the log files for notes and warnings.

Add any notes/warnings to the cran-comments.md file and update GitHub

(b.7) Submit to CRAN
- read http://r-pkgs.had.co.nz/release.html
- Use
    devtools::release()

